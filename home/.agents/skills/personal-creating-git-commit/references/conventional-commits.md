# Conventional Commits リファレンス

## フォーマット

```
<型>[任意のスコープ]: <説明>

[任意の本文]

[任意のフッター]
```

## 型プレフィックス

| 型         | 説明                                         |
| ---------- | -------------------------------------------- |
| `feat`     | 新機能の追加                                 |
| `fix`      | バグ修正                                     |
| `docs`     | ドキュメントのみの変更                       |
| `style`    | コードスタイル（フォーマット、セミコロン等） |
| `refactor` | リファクタリング（機能追加・バグ修正なし）   |
| `perf`     | パフォーマンス改善                           |
| `test`     | テストの追加・更新                           |
| `build`    | ビルドシステムや依存関係の変更               |
| `ci`       | CI 設定の変更                                |
| `chore`    | その他の変更（ツール、設定など）             |
| `revert`   | 以前のコミットを取り消す                     |

### 型選択の判断基準

Conventional Commits は Semantic Versioning と協調することを前提とした規約です。

そのため、型の選択は **「ユーザーから見て変化があるか」** で判断します。

**ユーザーの定義：**

- アプリケーションの場合：そのアプリを使うユーザー
- ライブラリの場合：そのライブラリを使う開発者

**判断基準：**

- ユーザーから見て変化がある → `feat`, `fix`, `perf`
- ユーザーから見て変化がない → `docs`, `style`, `refactor`, `test`, `build`, `ci`, `chore`

**よくある間違い：**

1. 「修正した」から `fix` を使う
    - 例: `fix: テストの設定を修正`
    - 何が間違っているか: テストの設定を修正しても、ユーザーの不具合は直らないので `fix` は使うべきではない
    - どう考えるべきか: 本コミットの趣旨はテストなので `test` を使う

2. 「スタイルを変えた」から `style` を使う
    - 例: `style: ボタンのスタイルを変更`
    - 何が間違っているか: `style` はコードスタイル（フォーマット、セミコロン等）のための型であり、デザインやスタイルシートのことではないので `style` は使うべきではない
    - どう考えるべきか: ユーザーから見て変化があるので `feat` か `fix` を使う

3. 「軽微な変更」だから `chore` を使う
    - 例: `chore: テキストを変更`
    - 何が間違っているか: ユーザーから見て変化があるので `chore` を使うべきではない
    - どう考えるべきか: ユーザーから見て変化があるので `feat` か `fix` を使う

## フッター

本文の後に空行を挟んで記載します。形式は `トークン: 値` または `トークン #値` です：

```
feat(auth): ログイン機能を追加

OAuth2 による認証を実装

Reviewed-by: Alice
Refs #123
```

## 例

```
feat(auth): OAuth2 によるログイン機能を追加
```

```
fix: ユーザーサービスの null ポインタを解決
```

```
docs: README にセットアップ手順を追記
```

```
refactor(api): レスポンス処理を簡素化
```

## SemVer を運用する場合

### 破壊的変更

型/スコープの後に`!`を追加、またはフッターに`BREAKING CHANGE:`を記載します：

```
feat!: 非推奨の API エンドポイントを削除
feat(api)!: レスポンスフォーマットを変更

BREAKING CHANGE: API レスポンスがオブジェクトから配列に変更
```

### SemVer との関連

| 型                | SemVer                     |
| ----------------- | -------------------------- |
| `fix`             | PATCH（例: 1.0.0 → 1.0.1） |
| `feat`            | MINOR（例: 1.0.0 → 1.1.0） |
| `BREAKING CHANGE` | MAJOR（例: 1.0.0 → 2.0.0） |
